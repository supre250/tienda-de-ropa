<!-- ADMIN - Formulario de producto -->

<div class="admin-product-form-page">
  <div class="header">
    <h1>
      {{ isEditMode ? 'Editar producto' : 'Nuevo producto' }}
    </h1>

    <button type="button" class="btn-secondary" (click)="cancel()">
      Cancelar
    </button>
  </div>

  <div *ngIf="loading" class="info-text">Cargando producto...</div>
  <div *ngIf="errorMessage" class="error-text">{{ errorMessage }}</div>

  <form
    class="product-form"
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    *ngIf="!loading"
  >
    <div class="form-grid">
      <div class="form-group">
        <label>Nombre</label>
        <input type="text" formControlName="name" />
        <div class="error-text" *ngIf="nameControl.invalid && nameControl.touched">
          El nombre es obligatorio (mínimo 3 caracteres).
        </div>
      </div>

      <div class="form-group">
        <label>Precio</label>
        <input type="number" formControlName="price" min="0" step="0.01" />
        <div
          class="error-text"
          *ngIf="priceControl.invalid && priceControl.touched"
        >
          El precio debe ser mayor o igual a 0.
        </div>
      </div>

      <div class="form-group">
        <label>Categoría</label>
        <select formControlName="category">
          <option value="">Selecciona una categoría</option>
          <option
            *ngFor="let cat of categories"
            [value]="cat._id"
          >
            {{ cat.name }}
          </option>
        </select>
        <div
          class="error-text"
          *ngIf="categoryControl.invalid && categoryControl.touched"
        >
          La categoría es obligatoria.
        </div>
      </div>

      <div class="form-group">
        <label>Stock</label>
        <input type="number" formControlName="stock" min="0" />
        <div
          class="error-text"
          *ngIf="stockControl.invalid && stockControl.touched"
        >
          El stock debe ser mayor o igual a 0.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Descripción</label>
      <textarea formControlName="description" rows="3"></textarea>
    </div>

    <div class="form-group">
      <label>URLs de imágenes (separadas por coma)</label>
      <input type="text" formControlName="images" placeholder="https://... , https://..." />
    </div>

    <div class="form-group">
      <label>Tallas (separadas por coma)</label>
      <input type="text" formControlName="sizes" placeholder="S, M, L, XL" />
    </div>

    <div class="form-group inline">
      <label>
        <input type="checkbox" formControlName="isActive" />
        Activo
      </label>
    </div>

    <div class="actions">
      <button
        type="submit"
        class="btn-primary"
        [disabled]="saving || form.invalid"
      >
        {{ saving ? 'Guardando...' : 'Guardar' }}
      </button>
      <button
        type="button"
        class="btn-secondary"
        (click)="cancel()"
      >
        Cancelar
      </button>
    </div>
  </form>
</div>
