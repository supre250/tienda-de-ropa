<div class="category-products-page">
  <h1 *ngIf="category; else defaultTitle">
    Categoría: {{ category.name }}
  </h1>
  <ng-template #defaultTitle>
    <h1>Productos por categoría</h1>
  </ng-template>

  <div *ngIf="loading" class="info-text">Cargando productos...</div>
  <div *ngIf="errorMessage" class="error-text">
    {{ errorMessage }}
  </div>

  <div class="products-grid" *ngIf="!loading && !errorMessage">
    <div *ngIf="products.length === 0" class="info-text">
      No hay productos en esta categoría.
    </div>

    <div class="product-card" *ngFor="let product of products">
      <img [src]="getProductImage(product)" [alt]="product.name" />

      <div class="product-body">
        <h3>{{ product.name }}</h3>
        <p class="price">
          {{ product.price | currency: 'USD':'symbol':'1.2-2' }}
        </p>
        <p class="description">
          {{ product.description || 'Sin descripción' }}
        </p>

        <a [routerLink]="['/products', product._id]" class="btn-outline">
          Ver detalle
        </a>
      </div>
    </div>
  </div>
</div>
